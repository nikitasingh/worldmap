
<div class="userlist">
  <h2>Colleagues in <%="#{params[:loc]}"%></h2>
<input type="text" id="name">
<input type="button" value="search" onclick="searchUserinLocation("<%="#{params[:loc]}"%>")" />
 <br/>
<% user= Colleague.where(:location=>  params[:loc]).page(params[:page]).per(5).order("id asc") %>

</div>
<%= link_to image_tag("icon_map.png",  :alt => "View Map"),  map_colleagues_path %>
<%= link_to image_tag("icon_list.png", :alt => "Manage Colleagues"), colleagues_path %>




<div class="hr"></div>
</div>
<div class="list_content">
     <%= paginate user %>
<table border="0">
     <thead> 
     
     </thead>
      <tbody>
   <% user.each do |colleague| %>
      <tr >
      
          <td width="10%"><%= image_tag colleague.attachment.url(:thumb) %></td>
          <td><b><%= colleague.name %> </b><br/>
           <%= colleague.project %><br/>
           
           
         </td>
         <td>E-mail<br/>
           Office<br/>
          Mobile<br/>
         </td>
       
 </tr>
<tr><td colspan="4"><div class="table_hr"></div>
</td></tr>
           <% end %>


            
      </tbody>
    </table>
    <br />

<br/>
<br/>
<br/>
</div>
<br/>
<br/>
</div>
<br/>
<br/>
<br/>

<script type="text/javascript">
function searchUserinLocation(location)
{
  alert(location);
   name=document.getElementById("name").value;
    
     $.ajax({
    url: '/colleagues/searchinloc?search='+name+'&loc='+location,
    error: function (XMLHttpRequest, textStatus, errorThrown) {
      alert("Something went wrong!! Please try again later.");
                
    },
    success: function(data){
        jQuery("#userlist").html(data);
    },
    type: "get"
  });  
 }
}
</script>